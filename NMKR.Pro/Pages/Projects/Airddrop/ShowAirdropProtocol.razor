@page "/showairdropprotocol/{projectid:int}/{uid}"

<BreadCrumb Items="_items"></BreadCrumb>

<MudContainer MaxWidth="MaxWidth.False" Class="mt-4">
    <AirdropLog uid="@uid" projectid="@projectid"></AirdropLog>
</MudContainer>

@code {
    [Parameter] public string uid { get; set; }
    [Parameter] public int projectid { get; set; }

    private readonly List<BreadcrumbItem> _items = new();
    protected override async Task OnParametersSetAsync()
    {
        await using var db = new EasynftprojectsContext(GlobalFunctions.optionsBuilder.Options);
        var project = await (from a in db.Nftprojects
            .Include(a => a.Settings)
            where a.Id == projectid 
            select a).AsNoTracking().FirstOrDefaultAsync();

        _items.Clear();
        if (projectid != 0 && project!=null)
        {
            _items.Add(new("Dashboard", href: "/"));
            _items.Add(new("NFT Projects", href: "/projects"));
            _items.Add(new($"Project ({project.Projectname})", href: $"/projects/{project.Uid}", disabled: false));
            _items.Add(new("Show Airdrop log", href: null, disabled: true));
        }
    }
}
